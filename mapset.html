<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ES6 Map Set</title>
    <style type="text/css">
        *{
            margin: 0;
            padding: 0;
        }
        #oldShow,#newShow,#newPrintf,#oldPrintf,#setPrt,#setResults{
            width: 200px;
            height: 40px;
            border: 1px solid black;
            margin: 20px 0 0 50px;
        }
        #setPrt,#setResults{
            width: 400px;
        }
    </style>
</head>
<body>
    <p>可查询的人有 Michael Bob Tracy</p>
    <input type="text" id="oldPrintf" placeholder="输入想要查询的人的名字">
    <input type="button" id="oldButton" value="点击查看成绩">
    <input type="text" id="oldShow"><br>
    <input type="text" id="newPrintf" placeholder="输入想要查询的人的名字">
    <input type="button" id="newButton" value="点击查看成绩">
    <input type="text" id="newShow"><br>
    <input type="text" id="setPrt" placeholder="输入含有重复元素的数组并用逗号隔开">
    <input type="button" id="setBut" value="点击去重">
    <input type="text" id="setResults">
</body>
<script type="text/javascript">
    "use strict"
//    var m = new Map();
//    var s = new Set();
//    alert("你的浏览器支持ES6。");

    //Map是一组键值对的结构，具有极快的查找速度。
    //举个例子，根据名字查找对应的成绩
    //oldShow
    var op = document.getElementById("oldPrintf");
    var ob = document.getElementById("oldButton");
    var os = document.getElementById("oldShow");
    var np = document.getElementById("newPrintf");
    var nb = document.getElementById("newButton");
    var ns = document.getElementById("newShow");

    //old
    var names = ["Michael","Bob","Tracy"];
    var scores = [95,70,86];

    function isInArr(arr,obj) {
        console.log(typeof arr);
        var i = arr.length;
        while (i--){
            if(arr[i] == obj){
                return i;
            }
        }
        return false;
    }

    //new
    var grade = new Map();
    grade.set("Michael",95);//添加新的key-value
    grade.set("Bob",70);
    grade.set("Tracy",86);

    //绑定点击事件
    ob.onclick = function () {
        if(op.value == ""){
            alert("请输入名字");
            return;
        }else if(isInArr(names,op.value) === false){
            alert("输入的名字不在查找范围内");
            return;
        }else {
           return os.value = scores[isInArr(names,op.value)];
        }
    }
    nb.onclick = function () {
        if(np.value == ""){
            alert("请输入名字");
            return;
        }else if(grade.has(np.value) === false){//是否存在key np.value   true/false
            alert("输入的名字不在查找范围内");
            return;
        }else {
            return ns.value = grade.get(np.value);//得到key的value
        }
    }

    //set
    //Set和Map类似，也是一组key的集合，但不存储value。由于key不能重复，所以，在Set中，没有重复的key
    var setp = document.getElementById("setPrt");
    var setb = document.getElementById("setBut");
    var setr = document.getElementById("setResults");


    setb.onclick = function () {
        console.log(setp.value);
        console.log(typeof setp.value);
        if (setp.value == ""){
            alert("输入不能为空");
            return;
        }else {
            var temporary = setp.value.split(",");
            var newArr = new Set(temporary);
            var tempArr = Array.from(newArr);
            console.log(tempArr);
            console.log(typeof tempArr);
            setr.value = tempArr;
        }
    }


</script>
</html>